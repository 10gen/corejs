<% /**
*      Copyright (C) 2008 10gen Inc.
*  
*    Licensed under the Apache License, Version 2.0 (the "License");
*    you may not use this file except in compliance with the License.
*    You may obtain a copy of the License at
*  
*       http://www.apache.org/licenses/LICENSE-2.0
*  
*    Unless required by applicable law or agreed to in writing, software
*    distributed under the License is distributed on an "AS IS" BASIS,
*    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
*    See the License for the specific language governing permissions and
*    limitations under the License.
*/ %>

<% processArgs("opts", "u");
   opts = opts || {};
   var login = User.findMyLocation();
   // FIXME: this form dynamically recomputes itself to do checks and stuff
   // login_user -> username, etc. If JS is disabled, registration is impossible
%>
<div id="register">
  <if opts.error>
    <div class="notice"><%= opts.error %></div>
  </if>

  <form method="post" class="edit register" id="edit_form">

    <fieldset class="edit register">
    <legend>Edit My Information</legend>
    <table>
    <tr>
        <td><label for="u_name">Username</label></td>
        <td><%= u.name %>
    </tr>

    <tr>
        <td><label for="u_email">Email</label></td>
        <td><input name="u_email" class="text" value="<%= u.email || "" %>"></td>
    </tr>

    <tr>
        <td><label for="u_firstname">First name (optional)</label></td>
        <td><input name="u_firstname" class="text" value="<%= u.firstname || "" %>"></td>
    </tr>

    <tr>
        <td><label for="u_lastname">Last name (optional)</label></td>
        <td><input name="u_lastname" class="text" value="<%= u.lastname || "" %>"></td>
    </tr>

    <tr>
        <td><label for="u_user">Display name (optional)</label></td>
        <td><input name="u_nickname" class="text" value="<%= u.nickname || "" %>"></td>
    </tr>

    <tr>
        <td><label for="u_url">URL (optional)</label></td>
        <td><input name="u_url" class="text" value="<%= u.url || "" %>"></td>
    </tr>

    <tr>
        <td><label for="u_pass1">Change Password (optional)</label></td>
        <td><input type="password" name="u_pass1" class="text"></td>
    </tr>

    <tr>
        <td><label for="u_pass2">Password Again</label></td>
        <td><input type="password" name="u_pass2" class="text"></td>
    </tr>

    <tr>
        <td></td>
        <td><input type="submit" value="Save" class="button" style="" name="save">
            <% if (opts.to) { %><input type="hidden" name="to" value="<%= opts.to %>"/><% } %>
        </td>
    </tr>
    </table>
    </fieldset>
  </form>

</div>
<% head.push( "<script src='/~~/ui/js/common.js'></script>" ); %>
